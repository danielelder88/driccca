
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DRICCA COSMÉTICOS - Sistema Otimizado</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen font-sans">

  <header class="bg-pink-600 text-white py-5 text-center text-3xl font-extrabold shadow-lg">
    <i class="fa-solid fa-store mr-2"></i>DRICCA COSMÉTICOS
  </header>

  <main class="p-6 max-w-4xl mx-auto space-y-8">

    <section id="areaCliente" class="hidden space-y-4">
      <h2 class="text-2xl font-bold text-pink-600">Área do Cliente</h2>
      <div id="produtosContainer" class="grid gap-4 sm:grid-cols-2"></div>
      <div id="carrinhoContainer" class="space-y-2"></div>
      <button onclick="finalizarPedido()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">Finalizar Pedido</button>
      <button onclick="logoutCliente()" class="w-full bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded">Sair</button>
    </section>

    <section id="areaAdmin" class="hidden space-y-4">
      <h2 class="text-2xl font-bold text-pink-600">Painel Administrativo</h2>
      <div class="space-y-2">
        <input id="produtoNome" placeholder="Nome" class="w-full border p-2 rounded" />
        <input id="produtoDescricao" placeholder="Descrição" class="w-full border p-2 rounded" />
        <input id="produtoPreco" type="number" placeholder="Preço" class="w-full border p-2 rounded" />
        <input id="produtoQtd" type="number" placeholder="Quantidade" class="w-full border p-2 rounded" />
        <input id="inputImagem" type="file" class="w-full" />
        <button onclick="cadastrarProduto()" class="w-full bg-pink-600 hover:bg-pink-700 text-white py-2 rounded">Cadastrar Produto</button>
      </div>
      <button onclick="logoutCliente()" class="w-full bg-gray-600 hover:bg-gray-700 text-white py-2 rounded">Sair</button>
    </section>

    <section id="loginCliente" class="space-y-4">
      <h2 class="text-2xl font-bold text-pink-600">Login</h2>
      <input id="clienteEmail" placeholder="Email" type="email" class="w-full border p-2 rounded" />
      <input id="clienteSenha" placeholder="Senha" type="password" class="w-full border p-2 rounded" />
      <button onclick="loginCliente()" class="w-full bg-pink-600 hover:bg-pink-700 text-white py-2 rounded">Entrar</button>
    </section>

  </main>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyAu0i-nJRJFhUmcB2NCYcueR0i7xGA4Rws",
    authDomain: "dricca-ecommerce.firebaseapp.com",
    projectId: "dricca-ecommerce",
    storageBucket: "dricca-ecommerce.appspot.com",
    messagingSenderId: "202913391561",
    appId: "1:202913391561:web:50cddc607a67540be4be18"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  const UI = {
    show(id) { document.getElementById(id).classList.remove('hidden'); },
    hide(id) { document.getElementById(id).classList.add('hidden'); },
    resetForm(ids) { ids.forEach(id => document.getElementById(id).value = ''); }
  };

  let usuarioAtual = null;

  const Auth = {
    login: async () => {
      const email = document.getElementById('clienteEmail').value;
      const senha = document.getElementById('clienteSenha').value;
      try {
        const cred = await auth.signInWithEmailAndPassword(email, senha);
        usuarioAtual = { email };
        UI.hide('loginCliente');
        UI.show(email === 'admin@admin.com' ? 'areaAdmin' : 'areaCliente');
      } catch (e) { alert(e.message); }
    },
    logout: async () => {
      await auth.signOut();
      usuarioAtual = null;
      UI.hide('areaCliente'); UI.hide('areaAdmin'); UI.show('loginCliente');
    }
  };

  const Produto = {
    cadastrar: async () => {
      const nome = document.getElementById('produtoNome').value;
      const descricao = document.getElementById('produtoDescricao').value;
      const preco = parseFloat(document.getElementById('produtoPreco').value);
      const quantidade = parseInt(document.getElementById('produtoQtd').value);
      await db.collection('produtos').add({ nome, descricao, preco, quantidade });
      UI.resetForm(['produtoNome', 'produtoDescricao', 'produtoPreco', 'produtoQtd']);
      alert('Produto cadastrado!');
    }
  };

  document.querySelector('#loginCliente button').onclick = Auth.login;
  document.querySelector('#areaCliente button:nth-child(4)').onclick = Auth.logout;
  document.querySelector('#areaAdmin button:nth-child(7)').onclick = Auth.logout;
  document.querySelector('#areaAdmin button:nth-child(6)').onclick = Produto.cadastrar;
</script>
</body>
</html>
